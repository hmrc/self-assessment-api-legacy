{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "properties": {
    "incomeSource": {
      "$ref": "#/definitions/eoyEstimateIncomeSourceArray",
      "description": "An array of income sources"
    },
    "totalTaxableIncome": {
      "$ref": "WholePounds.json",
      "description": "Sum of estimated taxable income for all income sources"
    },
    "incomeTaxAmount": {
      "$ref": "WholePounds.json",
      "description": "Calculated Income tax amount from estimated taxable income"
    },
    "nic2": {
      "$ref": "WholePounds.json",
      "description": "Calculated NIC Class 2 from estimates"
    },
    "nic4": {
      "$ref": "WholePounds.json",
      "description": "Calculated NIC Class 4 from estimates"
    },
    "totalNicAmount": {
      "$ref": "WholePounds.json",
      "description": "Sum of National Insurance amounts"
    },
    "incomeTaxNicAmount": {
      "$ref": "WholePounds.json",
      "description": "Total of calculated Income Tax and National Insurance from estimated annual taxable income"
    }
  },
  "required": [
    "incomeSource",
    "totalTaxableIncome",
    "incomeTaxAmount",
    "nic2",
    "nic4",
    "totalNicAmount",
    "incomeTaxNicAmount"
  ],
  "additionalProperties": false,
  "definitions": {
    "eoyEstimateIncomeSourceArray": {
      "description": "An array of annualised estimated income by income source",
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "description": "The Income Source ID",
            "type": "string"
          },
          "type": {
            "description": "Indicates the income source type. Values are: 01=Employment; 02=Share schemes; 03=Self-Employment; 04=Partnership; 05=UK Land and Property;06=Foreign income; 07=Dividends from foreign companies; 08=Trusts and Estates; 09=Interest from UK banks, building societies and securities etc; 10=Dividends from UK companies; 11=UK pensions and state benefits; 12=Gains on life insurance policies etc.",
            "type": "string",
            "pattern": "^[0-9]{2}$"
          },
          "taxableIncome": {
            "$ref": "WholePounds.json",
            "description": "Estimated taxable income for source"
          },
          "supplied": {
            "description": "Indicates if the estimate taxable income is supplied by the taxpayer (true) or calculated (false)",
            "type": "boolean"
          },
          "finalised": {
            "description": "Indicates if the income source has been finalised for the tax year (only applies to self-employment and UK Property income types)",
            "type": "boolean"
          }
        },
        "required": [
          "id",
          "type",
          "taxableIncome",
          "supplied"
        ],
        "additionalProperties": false
      }
    }
  }
}